(self.webpackChunkguzzle=self.webpackChunkguzzle||[]).push([[4928],{3905:function(t,e,a){"use strict";a.d(e,{Zo:function(){return s},kt:function(){return k}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),u=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},s=function(t){var e=u(t.components);return n.createElement(p.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,s=o(t,["components","mdxType","originalType","parentName"]),m=u(a),k=r,c=m["".concat(p,".").concat(k)]||m[k]||d[k]||l;return a?n.createElement(c,i(i({ref:e},s),{},{components:a})):n.createElement(c,i({ref:e},s))}));function k(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6310:function(t,e,a){"use strict";a.r(e),a.d(e,{frontMatter:function(){return o},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var n=a(2122),r=a(9756),l=(a(7294),a(3905)),i=["components"],o={},p={unversionedId:"how_to_guides/computes/legacy/Synapse/Synapse",id:"how_to_guides/computes/legacy/Synapse/Synapse",isDocsHomePage:!1,title:"Synapse",description:"- In Guzzle, Azure cloud setup, we can use Azure Synapse Spark Pool to execute our workloads. This article helps using Azure Synapse Spark Pool as a computing environment in Guzzle.",source:"@site/docs/how_to_guides/computes/legacy/Synapse/Synapse.md",sourceDirName:"how_to_guides/computes/legacy/Synapse",slug:"/how_to_guides/computes/legacy/Synapse/Synapse",permalink:"/docs/how_to_guides/computes/legacy/Synapse/Synapse",editUrl:"https://github.com/ja-guzzle/docs/blob/master/docs/how_to_guides/computes/legacy/Synapse/Synapse.md",version:"current",frontMatter:{}},u=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Network Diagram for Synapse",id:"network-diagram-for-synapse",children:[]},{value:"Guzzle VM Connection to synapse compute",id:"guzzle-vm-connection-to-synapse-compute",children:[]},{value:"Network diagram for synapse private endpoint",id:"network-diagram-for-synapse-private-endpoint",children:[]},{value:"Guzzle VM Connection to synapse private endpoint",id:"guzzle-vm-connection-to-synapse-private-endpoint",children:[]},{value:"Synapse Compute Support Matrix",id:"synapse-compute-support-matrix",children:[]},{value:"Guzzle Configurations",id:"guzzle-configurations",children:[]}],s={toc:u};function d(t){var e=t.components,a=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,n.Z)({},s,a,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"In Guzzle, Azure cloud setup, we can use Azure Synapse Spark Pool to execute our workloads. This article helps using Azure Synapse Spark Pool as a computing environment in Guzzle.")),(0,l.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Below are the Azure resources which will be required when leveraging Synapse Spark in Guzzle")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Resource"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Steps for creating resources"),(0,l.kt)("th",{parentName:"tr",align:null},"Information to retrieve (which is then used for Guzzle environment configurations and  setting up Computes/data stores)"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Spark Pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Spark pool added in synapse workspace that will be used by Guzzle"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/synapse-analytics/quickstart-create-apache-spark-pool-portal"},"Steps to setup synapse spark pool")),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Blob Storage Account"),(0,l.kt)("td",{parentName:"tr",align:null},"Blob account used for shared storage account permission to Storage Blob Data Contributor. Select Service principal(Registered App) as Member. ",(0,l.kt)("br",null)," - You need to disable soft delete because we are usign ADFS protocol to access (for databricks) ",(0,l.kt)("br",null)," - Disable Shared Storage Soft Delete"),(0,l.kt)("td",{parentName:"tr",align:null},"- ",(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/storage/blobs/assign-azure-role-data-access?tabs=portal"}," Steps to assign Storage Blob Data Contributor role to service principal")),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Key Vault"),(0,l.kt)("td",{parentName:"tr",align:null},"Key vault used to store different credentials (assumes one key vault is used to store all the credentials which are required for Guzzle environment configurations and data stores)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/key-vault/general/assign-access-policy?tabs=azure-portal"},"Assign a Key Vault access policy")),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"App Registration"),(0,l.kt)("td",{parentName:"tr",align:null},"- Register service principal app for Guzzle and generate secrted. ",(0,l.kt)("br",null)," - This app registration is not being used for Authentication and hence and the steps for Authentication setup can be skipped."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application"},"Steps for creating service principle")),(0,l.kt)("td",{parentName:"tr",align:null},"Client Id, Client Secret and Tenant ID (From App registration overview)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Workspace"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse workspace to be used for Guzzle."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/synapse-analytics/quickstart-create-workspace"},"Steps to create synapse workspace")),(0,l.kt)("td",{parentName:"tr",align:null},"Development endpoint URL")))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"This are the permissions to be granted to different AAD principals (User/groups/service principals / managed identity) on different resources (follow standard Azure document to grant permissions.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"AAD principal   (User/groups/service principals / managed identity)"),(0,l.kt)("th",{parentName:"tr",align:null},"Resources"),(0,l.kt)("th",{parentName:"tr",align:null},"RBAC (permission)"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Azure Service principal  (App Registration)"),(0,l.kt)("td",{parentName:"tr",align:null},"Primary storage ADLS"),(0,l.kt)("td",{parentName:"tr",align:null},"Blob Contributor"),(0,l.kt)("td",{parentName:"tr",align:null},"The spark jobs will read and write log files/temp files in the Primary storage as part of the job run. Since the job is run using service principal (app registration), same has to be grated read write permission  on primary ADLS.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Azure Service principal  (App Registration)"),(0,l.kt)("td",{parentName:"tr",align:null},"Blob Storage"),(0,l.kt)("td",{parentName:"tr",align:null},"Blob Reader"),(0,l.kt)("td",{parentName:"tr",align:null},"- The job which runs on spark-pool are submitted using service principal (app registration), and will need to retrieve guzzle binaries from the shared storage ( we only need to read binaries). ",(0,l.kt)("br",null)," - The guzzle binaries are written into shared storage by Guzzle VM using account key or service pincple denpending on what is configured in this setup: ",(0,l.kt)("a",{href:"https://guzzle.justanalytics.com/docs/how_to_guides/administration/environment_config/setup_shared_storage/"}," Shared Storage - Guzzle "))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Azure Service principal  (App Registration)"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse workspace"),(0,l.kt)("td",{parentName:"tr",align:null},"In Add role assignment section: ",(0,l.kt)("br",null)," - Scope - >Workspace ",(0,l.kt)("br",null)," - Role - > Synapse Admin"),(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle will submit the jobs to Synapse workspace and run the jobs spark pool - for this it needs minimum: Synapse Admin permission.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM system identity (or user defined identity)"),(0,l.kt)("td",{parentName:"tr",align:null},"Key Vault"),(0,l.kt)("td",{parentName:"tr",align:null},"Secret permission ",(0,l.kt)("br",null)," - Get ",(0,l.kt)("br",null)," - List ",(0,l.kt)("br",null)," - Set"),(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM needs to retrieve keys from key vault and also need to save passphrase in the KV for \u201cSync Passphrase\u201d function in for API ",(0,l.kt)("a",{href:"https://guzzle.justanalytics.com/docs/how_to_guides/administration/environment_config/api_settings/"},"Api Settings - Guzzle"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Azure Service principal  (App Registration)"),(0,l.kt)("td",{parentName:"tr",align:null},"Key Vault"),(0,l.kt)("td",{parentName:"tr",align:null},"Secret permission ",(0,l.kt)("br",null)," - Get ",(0,l.kt)("br",null)," - List ",(0,l.kt)("br",null)," - Set"),(0,l.kt)("td",{parentName:"tr",align:null},"The job which runs on spark-pool are submitted using service principal (app registration), and will need to retrieve the credential from KV for the data store.")))),(0,l.kt)("h2",{id:"network-diagram-for-synapse"},"Network Diagram for Synapse"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Synapse workspace is available on public network (as per default setup) the Developer endpoint can be connected over internet. Click ",(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/synapse-analytics/security/connectivity-settings#public-network-access"},"here")," for more information. All this traffic are on public end point"),(0,l.kt)("li",{parentName:"ul"},"The job which runs on spark-pool are submitted using service principal (app registration)")),(0,l.kt)("h2",{id:"guzzle-vm-connection-to-synapse-compute"},"Guzzle VM Connection to synapse compute"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Source"),(0,l.kt)("th",{parentName:"tr",align:null},"Target"),(0,l.kt)("th",{parentName:"tr",align:null},"Protocol/Port"),(0,l.kt)("th",{parentName:"tr",align:null},"Authentication Mechanism"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose of Connection"),(0,l.kt)("th",{parentName:"tr",align:null},"Traffic Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Notes (latency , through put, special security)"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"BLOB for Guzzle\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity (system generated \u200b or user defined identity of Guzzle VM)"),(0,l.kt)("td",{parentName:"tr",align:null},"To store jars, third party library on blob for jobs on spark compute to read\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Public"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Azure SQL for Guzzle\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"AAD user credential / native SQL account\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"To store jars, third party library on blob for jobs on spark compute to read\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Public"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Key Vault\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity (system generated \u200b or user defined identity of Guzzle VM)"),(0,l.kt)("td",{parentName:"tr",align:null},"Get stored secrets and keys\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Public"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Developer Endpoint"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"App Registration"),(0,l.kt)("td",{parentName:"tr",align:null},"Submit jobs to Spark Pool\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Public"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spark Pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Dedicated Pool\u200b (using Azure Synapse Native datastore)"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"App Registration which is specified in compute or Native user/password"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("b",null,"Authentication Mechanism:")," ",(0,l.kt)("br",null)," - App Registration which is specified in compute or Native user/password. ",(0,l.kt)("br",null)," - The external data source includes an authentication method, that's why. ",(0,l.kt)("br",null)," ",(0,l.kt)("b",null,"purpose of connection:")," ",(0,l.kt)("br",null)," for Ingestion: To read and write (connector) ",(0,l.kt)("br",null)," - for proessing: To run template SQL (JDBC connection) ",(0,l.kt)("br",null)," - for DQ/Recon: To read (connector)"),(0,l.kt)("td",{parentName:"tr",align:null},"Public"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Dedicated Pool\u200b (using Azure Synapse)"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Native user/password"),(0,l.kt)("td",{parentName:"tr",align:null},"Processing jobs run directly from Guzzle VM against API"),(0,l.kt)("td",{parentName:"tr",align:null},"Public"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spark pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"The temp API key which is part of request and decrypted using passphrase in KV"),(0,l.kt)("td",{parentName:"tr",align:null},"Spark job to connect to guzzle API to retrieve config"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spark pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Blob storage"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"App Registration"),(0,l.kt)("td",{parentName:"tr",align:null},"Spark jobs to retrieve the config"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spark pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Azure SQL"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"user/password or App Registration specified"),(0,l.kt)("td",{parentName:"tr",align:null},"To update repo tables"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spark pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Primary ADLS"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"App Registration"),(0,l.kt)("td",{parentName:"tr",align:null},"To read/write logs"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spark pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Key vault"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"App Registration"),(0,l.kt)("td",{parentName:"tr",align:null},"To fetch secrets from KV"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spark pool"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Developer Endpoint"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"App Registration"),(0,l.kt)("td",{parentName:"tr",align:null},"it will connect to Synapse Developer end point to stop the job"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"Apart from this, there will be additional network traffic between spark pool to source and target used in the ingestion/processing job."),(0,l.kt)("h2",{id:"network-diagram-for-synapse-private-endpoint"},"Network diagram for synapse private endpoint"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Resource"),(0,l.kt)("th",{parentName:"tr",align:null},"Azure Documentation Link"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Storage Account"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-gb/azure/storage/common/storage-network-security?tabs=azure-portal#change-the-default-network-access-rule"}," - Configure Azure Storage firewalls and virtual networks")," ",(0,l.kt)("br",null)," ",(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/storage/common/storage-private-endpoints"}," - Use private endpoints for Azure Storage")),(0,l.kt)("td",{parentName:"tr",align:null},"Disable public access and create private endpoint to access blob privately.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SQL Server"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/mysql/single-server/how-to-deny-public-network-access"},"Deny Public Network Access in Azure Database for MySQL using Azure portal")),(0,l.kt)("td",{parentName:"tr",align:null},"Disable public access and create 2 private endpoint: ",(0,l.kt)("br",null)," 1. Guzzle Vm ",(0,l.kt)("br",null)," 2. Synapse Workspace")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Key Vault"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/key-vault/general/private-link-service?tabs=portal"}," Integrate Key Vault with Azure Private Link ")),(0,l.kt)("td",{parentName:"tr",align:null},"Disable public access on azure key vault and used as private endpoint")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Private Endpoint"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-gb/azure/synapse-analytics/security/how-to-set-up-access-control"},"How to set up access control for your Azure Synapse workspace")),(0,l.kt)("td",{parentName:"tr",align:null},"Add all private endpoint to syanpse. ",(0,l.kt)("br",null)," 1. Storage Account ",(0,l.kt)("br",null)," 2.Key Vault ",(0,l.kt)("br",null)," 3. SQL Server  ",(0,l.kt)("br",null)," 4. Private Link Service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Private Link Service With Load Balancer"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{href:"https://learn.microsoft.com/en-us/azure/private-link/create-private-link-service-portal?tabs=dynamic-ip"},"Quickstart: Create a Private Link service by using the Azure portal ")),(0,l.kt)("td",{parentName:"tr",align:null},"To access Guzzle VM in private network, we need to create private link service.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle API Setting"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"Change Guzzle API Setting with private link service fully qualified domain name.")))),(0,l.kt)("h2",{id:"guzzle-vm-connection-to-synapse-private-endpoint"},"Guzzle VM Connection to synapse private endpoint"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Source"),(0,l.kt)("th",{parentName:"tr",align:null},"Target"),(0,l.kt)("th",{parentName:"tr",align:null},"Protocol/Port"),(0,l.kt)("th",{parentName:"tr",align:null},"Authentication Mechanism"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose of Connection"),(0,l.kt)("th",{parentName:"tr",align:null},"Traffic Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Notes (latency , through put, special security)"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Storage Acocunt for Guzzle\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"To storage jars, third party library on blob for spark compute to read\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Private"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Azure SQL for Guzzle\u200b\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"AAD user credential / SAS\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Read/write Guzzle audit and metadata\u200b\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Private"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Key Vault\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Get stored secrets and keys\u200b\u200b\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Private"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Databricks Control Plane\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Submit jobs to Databricks Cluster\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Private"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Control Plane\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Submit jobs to Spark Pool\u200b\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Private"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Synapse Dedicated Pool\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Submit jobs to Synapse dedicated pool\u200b\u200b\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Private"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Databricks Data plane\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle VM\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,l.kt)("td",{parentName:"tr",align:null},"Managed Identity\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Update logs, retrieve configs from Guzzle\u200b\u200b\u200b"),(0,l.kt)("td",{parentName:"tr",align:null},"Private"),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"Before running Job with Synapse it requries to have necessary guzzle setup.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Shared Storage Setup"),(0,l.kt)("li",{parentName:"ul"},"Guzzle Repo database setup"),(0,l.kt)("li",{parentName:"ul"},"Key Vault setup for guzzle")))))),(0,l.kt)("h2",{id:"synapse-compute-support-matrix"},"Synapse Compute Support Matrix"),(0,l.kt)("p",null,"Please follow Guzzle official documentation for synapse compute support with different data sources. Click ",(0,l.kt)("a",{href:"https://guzzle.justanalytics.com/docs/how_to_guides/datastores/datastore_overview/#datastore-and-compute-matrix"},"here"),"."),(0,l.kt)("h2",{id:"guzzle-configurations"},"Guzzle Configurations"),(0,l.kt)("p",null,"Synapse configurations"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Driver Memory"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the allocated driver memory for running jobs"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Driver Cores"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the allocated driver cores for running jobs"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Executor Memory"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the allocated executor memory for running jobs"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Executor Cores"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the allocated executor cores for running jobs"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Number of executors"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the number of spark executors you want the job to run"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Customize spark config"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify additional Spark configuration options. Specify the config name and config value"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")))))}d.isMDXComponent=!0}}]);