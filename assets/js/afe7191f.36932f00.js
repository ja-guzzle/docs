(self.webpackChunkguzzle=self.webpackChunkguzzle||[]).push([[6800],{3905:function(t,e,n){"use strict";n.d(e,{Zo:function(){return m},kt:function(){return c}});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=a.createContext({}),u=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},m=function(t){var e=u(t.components);return a.createElement(s.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},p=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,m=o(t,["components","mdxType","originalType","parentName"]),p=u(n),c=r,g=p["".concat(s,".").concat(c)]||p[c]||d[c]||l;return n?a.createElement(g,i(i({ref:e},m),{},{components:n})):a.createElement(g,i({ref:e},m))}));function c(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,i=new Array(l);i[0]=p;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var u=2;u<l;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2838:function(t,e,n){"use strict";n.r(e),n.d(e,{frontMatter:function(){return o},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var a=n(2122),r=n(9756),l=(n(7294),n(3905)),i=["components"],o={id:"azure_monitor",title:"Azure Monitor"},s={unversionedId:"how_to_guides/administration/environment_config/azure_monitor",id:"how_to_guides/administration/environment_config/azure_monitor",isDocsHomePage:!1,title:"Azure Monitor",description:"Using Guzzle's Azure Monitor service, User can connect and send Guzzle Audits and Logs data to Log Analytics Workspace. User can also search and filter the logs, and setup monitoring or alerting mechanisms based on log or job audit events or may write a more advanced query to perform statistical analysis and visualize the results in a chart.",source:"@site/docs/how_to_guides/administration/environment_config/Azure Monitor.md",sourceDirName:"how_to_guides/administration/environment_config",slug:"/how_to_guides/administration/environment_config/azure_monitor",permalink:"/docs/how_to_guides/administration/environment_config/azure_monitor",editUrl:"https://github.com/ja-guzzle/docs/blob/master/docs/how_to_guides/administration/environment_config/Azure Monitor.md",version:"current",frontMatter:{id:"azure_monitor",title:"Azure Monitor"},sidebar:"sideBar",previous:{title:"User Management",permalink:"/docs/how_to_guides/administration/security/user_management"},next:{title:"Author",permalink:"/docs/how_to_guides/author/author"}},u=[{value:"Setup Azure Monitor",id:"setup-azure-monitor",children:[]},{value:"Custom Logs Tables",id:"custom-logs-tables",children:[]},{value:"Limitations",id:"limitations",children:[]}],m={toc:u};function d(t){var e=t.components,n=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,a.Z)({},m,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Using Guzzle's Azure Monitor service, User can connect and send Guzzle Audits and Logs data to Log Analytics Workspace. User can also search and filter the logs, and setup monitoring or alerting mechanisms based on log or job audit events or may write a more advanced query to perform statistical analysis and visualize the results in a chart."),(0,l.kt)("h2",{id:"setup-azure-monitor"},"Setup Azure Monitor"),(0,l.kt)("p",null,"User can view the logs and audit data using ",(0,l.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/azure-monitor/logs/log-analytics-workspace-overview"},"Log Analytics Workspace")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"User can create new Log Analytics Workspace in Azure Portal or use ",(0,l.kt)("a",{parentName:"li",href:"https://portal.azure.com/#blade/HubsExtension/Resources/resourceType/Microsoft.OperationalInsights%2Fworkspaces"},"default workspace")),(0,l.kt)("li",{parentName:"ul"},"Copy ",(0,l.kt)("inlineCode",{parentName:"li"},"Workspace ID")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"Primary Key")," value from ",(0,l.kt)("inlineCode",{parentName:"li"},"Log Analytics Workspace > Agents management")," section ",(0,l.kt)("a",{href:"https://guzzle.justanalytics.com/img/docs/how-to-guides/administrator/environment-config/azure_monitor_default_workspace.png",target:"_self"},(0,l.kt)("img",{width:"1000",src:"/img/docs/how-to-guides/administrator/environment-config/azure_monitor_default_workspace.png"}))),(0,l.kt)("li",{parentName:"ul"},"Configure Azure Monitor in Guzzle using ",(0,l.kt)("inlineCode",{parentName:"li"},"Manage -> Environment Config > Azure Monitor > Enable")," section."),(0,l.kt)("li",{parentName:"ul"},"It requires ",(0,l.kt)("inlineCode",{parentName:"li"},"Workspace ID")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"Primary Key")," of Log Analytics Workspace",(0,l.kt)("a",{href:"https://guzzle.justanalytics.com/img/docs/how-to-guides/administrator/environment-config/azure_monitor_guzzle_config.png",target:"_self"},(0,l.kt)("img",{width:"1000",src:"/img/docs/how-to-guides/administrator/environment-config/azure_monitor_guzzle_config.png"}))),(0,l.kt)("li",{parentName:"ul"},"User can specify ",(0,l.kt)("inlineCode",{parentName:"li"},"Primary Key")," value or key vault secret name"),(0,l.kt)("li",{parentName:"ul"},"By default, Guzzle creates two custom tables",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"GuzzleJobAudit")," - to store Guzzle Job Audit data"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"GuzzleLog")," - to store Guzzle Job and API logs"))),(0,l.kt)("li",{parentName:"ul"},"User can also override custom table names "),(0,l.kt)("li",{parentName:"ul"},"As soon as User press update button, It will verify the credentials and store it in ",(0,l.kt)("inlineCode",{parentName:"li"},"guzzle.yml")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"guzzle-api.yml")," file")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},'  guzzle:\n    azure_monitor:      \n      workspace_id: "xxxxxxxx-xxxx-xxxx-xxxxx-xxxxx"\n      primary_key: "xxxxxxxxxxxx"\n      job_audit_custom_log_name: "GuzzleJobAudit"\n      job_log_custom_log_name: "GuzzleLog"\n')),(0,l.kt)("h2",{id:"custom-logs-tables"},"Custom Logs Tables"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"Guzzle Job Audit"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"When the Job execution is completed, It will generate Job Audit record in Log Analytics Workspace"),(0,l.kt)("li",{parentName:"ul"},"Guzzle Job audit custom log includes the below custom fields")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"column name"),(0,l.kt)("th",{parentName:"tr",align:null},"data type"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TimeGenerated"),(0,l.kt)("td",{parentName:"tr",align:null},"datetime")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JobInstanceId_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"BatchId_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ParentJobInstanceId_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"BusinessDate_t"),(0,l.kt)("td",{parentName:"tr",align:null},"datetime")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"batch_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Name_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Module_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Tag_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"StartTime_t"),(0,l.kt)("td",{parentName:"tr",align:null},"datetime")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"EndTime_t"),(0,l.kt)("td",{parentName:"tr",align:null},"datetime")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Status_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Message"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ExecutorId_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ScheduleId_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SourceName_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")))),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"Guzzle Log"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"It will use Guzzle custom logger to send Guzzle Job and API logs to Log Analytics Workspace"),(0,l.kt)("li",{parentName:"ul"},"Guzzle Logs custom log includes the below custom fields")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Column name"),(0,l.kt)("th",{parentName:"tr",align:null},"Data type"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TimeGenerated"),(0,l.kt)("td",{parentName:"tr",align:null},"datetime")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JobInstanceId_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Name_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Module_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Class_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"MethodName_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ThreadName_s"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Level"),(0,l.kt)("td",{parentName:"tr",align:null},"string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Message"),(0,l.kt)("td",{parentName:"tr",align:null},"string")))),(0,l.kt)("h2",{id:"limitations"},"Limitations"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If User updates credentials manually in ",(0,l.kt)("inlineCode",{parentName:"li"},"guzzle.yml")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"guzzle-api.yml")," file. It required Guzzle API service to restart and in Analytics cluster It will take effect when new job is submitted or cluster is restarted.")))}d.isMDXComponent=!0}}]);