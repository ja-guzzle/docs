(self.webpackChunkguzzle=self.webpackChunkguzzle||[]).push([[1931],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=s(n),m=r,g=c["".concat(u,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=c;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},7632:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},metadata:function(){return u},toc:function(){return s},default:function(){return d}});var a=n(2122),r=n(9756),l=(n(7294),n(3905)),o=["components"],i={id:"housekeeping_hive_and_delta_tables",title:"Housekeeping Hive and Delta tables"},u={unversionedId:"how_to_guides/governance/housekeeping_hive_and_delta_tables",id:"how_to_guides/governance/housekeeping_hive_and_delta_tables",isDocsHomePage:!1,title:"Housekeeping Hive and Delta tables",description:"You can perform very granular level housekeeping on your target tables as per your data retention policy across various data layers (staging or bronze layer, silver or transformed layer or gold or data marts) within the data lake using this module.",source:"@site/docs/how_to_guides/governance/Housekeeping Hive and Delta tables.md",sourceDirName:"how_to_guides/governance",slug:"/how_to_guides/governance/housekeeping_hive_and_delta_tables",permalink:"/docs/how_to_guides/governance/housekeeping_hive_and_delta_tables",editUrl:"https://github.com/ja-guzzle/docs/blob/master/docs/how_to_guides/governance/Housekeeping Hive and Delta tables.md",version:"current",frontMatter:{id:"housekeeping_hive_and_delta_tables",title:"Housekeeping Hive and Delta tables"},sidebar:"sideBar",previous:{title:"Constraints Check",permalink:"/docs/how_to_guides/governance/constraint_checks"},next:{title:"Reconcilation of data accross two tables",permalink:"/docs/how_to_guides/governance/reconcilation_of_data"}},s=[{value:"Retention Strategies",id:"retention-strategies",children:[]}],p={toc:s};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"You can perform very granular level housekeeping on your target tables as per your data retention policy across various data layers (staging or bronze layer, silver or transformed layer or gold or data marts) within the data lake using this module."),(0,l.kt)("p",null,"Guzzle Support below datastores for Housekeeping."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Hive"),(0,l.kt)("li",{parentName:"ol"},"Delta")),(0,l.kt)("p",null,"Guzzle provider below functionality and properties for Housekeeping"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Datastore"),(0,l.kt)("td",{parentName:"tr",align:null},"You can choose any of the available datastore from drop-down (as appropriate). If the connection is not available in drop-down then you can create new data store"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Table"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the table which needs to be housekept. The table name can be fully qualified with the database name. If the database name is not specified then it is taken from the Datastore definition"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Housekeeping Column"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify column name to be used for housekeeping the table. This has to be the partition column of the table of the data type Date or timestamp"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Operation"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the operation you want to perform on the table for housekeeping.",(0,l.kt)("br",null)," Guzzle has two types of operations. 1. Delete and 2. Move"),(0,l.kt)("td",{parentName:"tr",align:null},"Delete"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Secondary Table Name"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify secondary table to move housekeep data in that source (only applicable while operation is Move)"),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Reference Point"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify any of the available options in the drop-down list - Current Time, Max Value, Value as a reference point for applying the housekeeping rules. If selected Current Time, it will housekeep treating current system timestamp as a reference point to apply the housekeeping rules defined under Retention Strategies. If selected Max Value, it will calculate the maximum value for the Housekeeping Column specified in above section as reference point. If selected Value, you can specify custom value or pass value through a runtime parameter as reference point for housekeeping."),(0,l.kt)("td",{parentName:"tr",align:null},"Current Time"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")))),(0,l.kt)("h2",{id:"retention-strategies"},"Retention Strategies"),(0,l.kt)("p",null,"Specify the retention strategies rules for housekeeping to retain rule data."),(0,l.kt)("p",null,"Guzzle provide below Retention rule to retain your data"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Partitions"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the partition columns to get housekeep data based on partition."),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Retention Strategy"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify days, weeks, months, quarters, years to retain data based on that rules."),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Day Of Week"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify on which days data you want to retain"),(0,l.kt)("td",{parentName:"tr",align:null},"Monday"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Strict Retentions Period End"),(0,l.kt)("td",{parentName:"tr",align:null},"When we mark strick_retention_period true then it will only retain the record if it is the last date record. If it is false then it will try to retain the previous date record, and it will find the previous date record until it finds data."),(0,l.kt)("td",{parentName:"tr",align:null},"False"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Strict Retentions Grain"),(0,l.kt)("td",{parentName:"tr",align:null},"Users can provide a partition column list for when user want to retain data, like if I have provided two partition systems and location then it will retain last date data for each system and location but if I provide only the system then it will retain data for only the last date of the system it will not retain for all locations."),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"No")))))}d.isMDXComponent=!0}}]);