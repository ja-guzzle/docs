(self.webpackChunkguzzle=self.webpackChunkguzzle||[]).push([[1911],{3905:function(t,e,a){"use strict";a.d(e,{Zo:function(){return c},kt:function(){return p}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var d=n.createContext({}),s=function(t){var e=n.useContext(d),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},c=function(t){var e=s(t.components);return n.createElement(d.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,d=t.parentName,c=o(t,["components","mdxType","originalType","parentName"]),m=s(a),p=r,k=m["".concat(d,".").concat(p)]||m[p]||u[p]||l;return a?n.createElement(k,i(i({ref:e},c),{},{components:a})):n.createElement(k,i({ref:e},c))}));function p(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var d in e)hasOwnProperty.call(e,d)&&(o[d]=e[d]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},9331:function(t,e,a){"use strict";a.r(e),a.d(e,{frontMatter:function(){return o},metadata:function(){return d},toc:function(){return s},default:function(){return u}});var n=a(2122),r=a(9756),l=(a(7294),a(3905)),i=["components"],o={id:"working_with_delta_lake",title:"Working with Delta Lake"},d={unversionedId:"how_to_guides/ingest_data/working_with_delta_lake",id:"how_to_guides/ingest_data/working_with_delta_lake",isDocsHomePage:!1,title:"Working with Delta Lake",description:"Delta Lake provides ACID transactions, scalable metadata handling, and unifies streaming and batch data processing. Delta Lake runs on top of your existing data lake and is fully compatible with Apache Spark APIs. Delta Lake on Databricks allows you to configure Delta table.",source:"@site/docs/how_to_guides/ingest_data/Working with Delta.md",sourceDirName:"how_to_guides/ingest_data",slug:"/how_to_guides/ingest_data/working_with_delta_lake",permalink:"/docs/how_to_guides/ingest_data/working_with_delta_lake",editUrl:"https://github.com/ja-guzzle/docs/blob/master/docs/how_to_guides/ingest_data/Working with Delta.md",version:"current",frontMatter:{id:"working_with_delta_lake",title:"Working with Delta Lake"},sidebar:"sideBar",previous:{title:"Working with Multiple Files",permalink:"/docs/how_to_guides/ingest_data/working_with_multiple_files"},next:{title:"Working with JDBC Database",permalink:"/docs/how_to_guides/ingest_data/working_with_jdbc"}},s=[{value:"Delta Lake table as a Source",id:"delta-lake-table-as-a-source",children:[]},{value:"Interface for Delta Lake Source",id:"interface-for-delta-lake-source",children:[]},{value:"Delta Lake as a Target or Reject",id:"delta-lake-as-a-target-or-reject",children:[]},{value:"Interface for Delta Lake as Target and Reject",id:"interface-for-delta-lake-as-target-and-reject",children:[]}],c={toc:s};function u(t){var e=t.components,a=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,n.Z)({},c,a,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Delta Lake provides ACID transactions, scalable metadata handling, and unifies streaming and batch data processing. Delta Lake runs on top of your existing data lake and is fully compatible with Apache Spark APIs. Delta Lake on Databricks allows you to configure Delta table."),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Only supported on Databricks compute"))),(0,l.kt)("h2",{id:"delta-lake-table-as-a-source"},"Delta Lake table as a Source"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Table + Filter"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the table from where to read data. The table can contain schema or even database name. If you select Table as input, data flow fetches all the data from the table specified in the dataset.",(0,l.kt)("br",null)," Example: ",(0,l.kt)("br",null),"customerdb.","[dbo]",".","[customer]",(0,l.kt)("br",null),"[customer]"," (default schema name dbo will be assumed)",(0,l.kt)("br",null),"[dbo]",".","[customer]"," (database name shall be as per Datastore config)",(0,l.kt)("br",null),(0,l.kt)("br",null),"Also when the Table option is selected, you can also specify the Filter which needs to be included when querying data from synapse. The filter can be used to select only a part of the table. We may basically enter a condition and only the part of the table that satisfies the condition will be seen in the Target Section."),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SQL"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the SQL query which will be run as-is on the source."),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Clean Column Name"),(0,l.kt)("td",{parentName:"tr",align:null},"To specify whether to clean the column names of source data (both file headers and column names from table). All the characters other than alphanumeric will be converted to _.",(0,l.kt)("br",null),"Ex. 'col.1' will become 'col_1', 'col@1' will become 'col_1'"),(0,l.kt)("td",{parentName:"tr",align:null},"False"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Configure Pre and Post SQL"),(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle supports Pre-SQL and Post-SQL for source and target and their execution in ingestion. It is mainly used for pre and post formatting of data in database.",(0,l.kt)("br",null)," For more information click ",(0,l.kt)("a",{parentName:"td",href:"pre-SQL_and_post-SQL_in_ingestion"},"here"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"NULL"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Configure watermark"),(0,l.kt)("td",{parentName:"tr",align:null},"A watermark represents tracking the last loaded value for one or more columns for a given source table or source SQL to enable loading data incrementally. Using watermark columns is one of the mechanisms used for changed data capture (CDC). ",(0,l.kt)("br",null)," For more information click ",(0,l.kt)("a",{parentName:"td",href:"watermark"},"here"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"NULL"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Configure columns restriction"),(0,l.kt)("td",{parentName:"tr",align:null},"Mention column names and choose from the options to exclude and include columns. ",(0,l.kt)("br",null)," For more information click ",(0,l.kt)("a",{parentName:"td",href:"column_restrictions"},"here"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"NULL"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Configure table dependency"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"NULL"),(0,l.kt)("td",{parentName:"tr",align:null},"No")))),(0,l.kt)("h2",{id:"interface-for-delta-lake-source"},"Interface for Delta Lake Source"),(0,l.kt)("a",{href:"https://guzzle.justanalytics.com/img/docs/how-to-guides/ingest_data/delta_1.png",target:"_self"},(0,l.kt)("img",{width:"1000",src:"/img/docs/how-to-guides/ingest_data/delta_1.png"})),(0,l.kt)("h2",{id:"delta-lake-as-a-target-or-reject"},"Delta Lake as a Target or Reject"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Table"),(0,l.kt)("td",{parentName:"tr",align:null},"This is used to specify the Target Table we would like to create based on our Source."),(0,l.kt)("td",{parentName:"tr",align:null},"None"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Operation"),(0,l.kt)("td",{parentName:"tr",align:null},"Provides two options that determines whether the source content or records are expected to be appended or overwritten in order to disallow existing data-",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Append:")," To atomically add new data to an existing target table.",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Overwrite:")," To atomically replace the data in a target table with source table. The partition columns are detected based on the source.",(0,l.kt)("br",null),"For more information click ",(0,l.kt)("a",{parentName:"td",href:"overwrite_and_append_operatoins"},"here.")),(0,l.kt)("td",{parentName:"tr",align:null},"Append"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Auto create table"),(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle provides the Auto Create Table feature in the Target Section. When selected it will automatically create a Target Table for us with the name as specified in the Table section above. In the schema section we have the Partition indicator. This indicator is used when guzzle auto creates a table for Hive to decide the partition column. The order of partition columns will be according to how it appears in the Schema Section.",(0,l.kt)("br",null)," This can be seen in the figure below:"),(0,l.kt)("td",{parentName:"tr",align:null},"True"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Merge schema"),(0,l.kt)("td",{parentName:"tr",align:null},"Automatically update schema of table and make it compatible with the data being written.",(0,l.kt)("br",null),"For more information click ",(0,l.kt)("a",{parentName:"td",href:"schema_drift#merge-schema"},"here"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"False"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Overwrite schema"),(0,l.kt)("td",{parentName:"tr",align:null},"Automatically overwrite schema of table and make it compatible with the data being written. This option is only available if operation is ",(0,l.kt)("strong",{parentName:"td"},"overwrite"),".",(0,l.kt)("br",null),"For more information click ",(0,l.kt)("a",{parentName:"td",href:"schema_drift##overwrite-schema"},"here"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"False"),(0,l.kt)("td",{parentName:"tr",align:null},"NO")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Configure truncate partition columns"),(0,l.kt)("td",{parentName:"tr",align:null},"Specify the target table partition column names and its values to truncate(delete) the target table partitions before writing into the table.",(0,l.kt)("br",null)," For more information click ",(0,l.kt)("a",{parentName:"td",href:"configure_truncate_partition_columns"},"here"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"NULL"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Configure pre and post sql"),(0,l.kt)("td",{parentName:"tr",align:null},"Guzzle supports Pre-SQL and Post-SQL for source and target and their execution in ingestion. It is mainly used for pre and post formatting of data in database.",(0,l.kt)("br",null)," For more information click ",(0,l.kt)("a",{parentName:"td",href:"pre-SQL_and_post-SQL_in_ingestion"},"here"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"NULL"),(0,l.kt)("td",{parentName:"tr",align:null},"No")))),(0,l.kt)("h2",{id:"interface-for-delta-lake-as-target-and-reject"},"Interface for Delta Lake as Target and Reject"),(0,l.kt)("a",{href:"https://guzzle.justanalytics.com/img/docs/how-to-guides/ingest_data/delta_2.png",target:"_self"},(0,l.kt)("img",{width:"1000",src:"/img/docs/how-to-guides/ingest_data/delta_2.png"})))}u.isMDXComponent=!0}}]);