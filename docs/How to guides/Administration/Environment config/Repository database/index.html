<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Guzzle Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Guzzle Blog Atom Feed"><title data-react-helmet="true">Repository database | Guzzle</title><meta data-react-helmet="true" property="og:url" content="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Repository database"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Repository database | Guzzle"><meta data-react-helmet="true" name="description" content="Updating Guzzle Repository Database"><meta data-react-helmet="true" property="og:description" content="Updating Guzzle Repository Database"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Repository database"><link data-react-helmet="true" rel="alternate" href="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Repository database" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Repository database" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.ab43cd5c.css">
<link rel="preload" href="/docs/assets/js/runtime~main.f8084dee.js" as="script">
<link rel="preload" href="/docs/assets/js/main.3411638d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/docs/introduction to guzzle">Docs</a><a class="navbar__item navbar__link" href="/docs/Api/api">API</a><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_3rmH"></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/docs/introduction to guzzle">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Api/api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/blog">Blog</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/docs/introduction to guzzle">Introduction to guzzle</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Concepts/concepts">concepts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Getting started/getting-started">getting-started</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How to guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Environment config</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/docs/How to guides/Administration/Environment config/Repository database">Repository database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/How to guides/Administration/Environment config/Setup Shared Storage">Setup Shared Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/How to guides/Administration/Environment config/Timeout and Sync">Timeout and Sync</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Maintenance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Maintenance/JWT">JWT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Maintenance/Schedule">Schedule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Maintenance/View service log">View service log</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Security/Azure Single Sign On">Azure Single Sign On</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Security/User management">User management</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Author</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Author/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Computes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Computes/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Datastores</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Datastores/Server file system">Server file system</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Governance/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Ingest data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Ingest data/Ingest Data from Local file system to MySQL Database">Ingest Data from Local file system to MySQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Ingest data/Working with JSON Files">Working with JSON Files</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Monitor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Monitor/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Orchestration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Orchestration/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Parameters</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Parameters/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Process data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Process data/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Security/introduction to guzzle">Introduction to guzzle</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/References/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Samples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Resources/Samples/introduction to guzzle">Introduction to guzzle</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Tutorials/introduction to guzzle">Introduction to guzzle</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Repository database</h1></header><div class="markdown"><p>Updating Guzzle Repository Database</p><p>One of the important components of a Guzzle instance is the repository database. Guzzle repository contains two types of table as described below: </p><ol><li><p>Run-time audits of job runs, output of reconciliation, data quality checks and housekeeping, watermark values of incremental data load. </p></li><li><p>Metadata tables for for Guzzle app</p></li></ol><p>The marketplace deployment of Guzzle comes bundled with a local MySQL database instance which is meant for trial and development purposes. When using Azure Databricks compute for running activities, it is mandatory to configure an external database to host Guzzle repository. The supported databases are: </p><ol><li><p>Azure SQL <strong>(recommended)</strong></p></li><li><p>SQL Server 2016 and above</p></li><li><p>Azure MySQL</p></li><li><p>MySQL Database version 8 and above</p></li></ol><p>You will need to ensure the database used for Guzzle repository is accessible by both Guzzle VM and Azure Databricks workspace.</p><p>Below diagram explains typical setup of configuring Azure SQL DB to host Guzzle repository.  </p><p><img alt="repository database" src="/docs/assets/images/repository_db01-60256e22f3b323f2c442e0631178d2d8.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="steps-to-update-repository-database"></a>Steps to Update Repository database<a class="hash-link" href="#steps-to-update-repository-database" title="Direct link to heading">#</a></h2><ol><li><p>Go to the Admin menu from the top navigation bar.</p></li><li><p>Navigate to Environment-&gt; Repository Database</p></li><li><p>Enter following configuration details:</p></li></ol><table><tr><td>Property </td><td>Description</td><td>Default Value</td><td>Required</td></tr><tr><td>Credential type</td><td>Specify credential type to be used to connect to repository database: - Native : This is native Azure SQL, SQL Server or MySQL account - Azure service principal: To use Azure service principal and secret to connect to Azure SQL database. This is not supported for other database</td><td>Native</td><td>Yes</td></tr><tr><td>Driver class</td><td>Specify the driver class name which database is going to be used. This can be left empty if standard Driver provided by Guzzle are to be used</td><td>None</td><td>Yes</td></tr><tr><td>JDBC Url</td><td>Specify JDBC URL of the Repository database: For Azure SQL/ SQL server, you can use below format to specify JDBC URL: `jdbc:sqlserver://&lt;server name&gt;.database.windows.net;database=&lt;database name&gt;;encrypt=true;trustServerCertificate=true;create=false;loginTimeout=30;socketKeepAlive=true` For Azure MySQL / MySQL Server following format can be used: jdbc:mysql://&lt;server name&gt;:3306/&lt;database name&gt;</td><td>None</td><td>Yes</td></tr><tr><td>Username</td><td>Username to connect to repository database Applicable for Native credential type</td><td>None</td><td>Yes</td></tr><tr><td>Password</td><td>Password to connect to repository database Applicable for Native credential type</td><td>None</td><td>Yes</td></tr><tr><td>Client Id</td><td>Client id of Azure Service Principal Applicable for Azure service principal credential type</td><td>None</td><td>Yes</td></tr><tr><td>Client Secret</td><td>Client Secret of Azure Service Principal Applicable for Azure service principal credential type</td><td>None</td><td>Yes</td></tr><tr><td>Tenant Id</td><td>Tenant id of Azure Service Principal Applicable for Azure service principal credential type</td><td>None</td><td>Yes</td></tr></table><ol start="4"><li><p>Click on <strong>Validate </strong>to validate the connection details of the repository database. Its strongly recommended to validate the connection details else it may impact the Guzzle instance</p></li><li><p>Click on <strong>Update </strong>to update the repository database details. Guzzle initialize the above database with required tables for Guzzle app if they are ont present</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="steps-to-initialize-guzzle-repository-database"></a>Steps to Initialize Guzzle Repository database<a class="hash-link" href="#steps-to-initialize-guzzle-repository-database" title="Direct link to heading">#</a></h2><p>As mentioned above, Guzzle repository contains two types of tables:</p><p>The first set of tables are meant for: Run-time audits of job runs, output of reconciliation, data quality checks and housekeeping, watermark values of incremental data load. </p><p>This table contains additional context columns that are useful for analysis. Guzzle batch functionality has a concept of stages which again are stored as explicit columns in the batch related audit tables. </p><ol><li>Metadata tables for for Guzzle app</li></ol><p>&quot;Initialize Database&quot; functionality is meant Initialize the run </p><ol start="6"><li>To initialize the repository </li></ol><p>Step 6 : To validate your connection click on Validate.</p><p>Step 7 : For Apply changes click on Update</p><p>Guzzle also give functionality to specify your context column and Stages</p><p>Step 8 : Go to Initialize database tab </p><p>Step 9: Context Column : Specify a list of context columns you want. Guzzle come up with below default context columns </p><ol><li><p>system</p></li><li><p>location</p></li></ol><p>Step 10 : Stage : Specify a list of Stages you want. Guzzle Come up with below default Stages </p><ol><li><p>STG</p></li><li><p>FND</p></li><li><p>SNP</p></li><li><p>CALC</p></li><li><p>REP</p></li><li><p>OUT</p></li></ol><p>Step 11 :  Save the changes and Initialize the database via click on Initialize.</p><p>The Guzzle UI will auto-detect if the repository tables are present, and it will show</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</h5></div><div class="admonition-content"><p>On Initialize guzzle will create a database table related to guzzle jobs if the database is already initialized then guzzle will show an option as reinitialize to reinitialize the database.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/How to guides/Administration/Environment config/Repository database.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/docs/Getting started/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« getting-started</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/docs/How to guides/Administration/Environment config/Setup Shared Storage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setup Shared Storage Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#steps-to-update-repository-database" class="table-of-contents__link">Steps to Update Repository database</a></li><li><a href="#steps-to-initialize-guzzle-repository-database" class="table-of-contents__link">Steps to Initialize Guzzle Repository database</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Guzzle, Inc.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.f8084dee.js"></script>
<script src="/docs/assets/js/main.3411638d.js"></script>
</body>
</html>