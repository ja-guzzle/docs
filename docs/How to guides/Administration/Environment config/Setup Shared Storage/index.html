<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Guzzle Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Guzzle Blog Atom Feed"><title data-react-helmet="true">Setup Shared Storage | Guzzle</title><meta data-react-helmet="true" property="og:url" content="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Setup Shared Storage"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Setup Shared Storage | Guzzle"><meta data-react-helmet="true" name="description" content="Applicable when using Azure Databricks as compute"><meta data-react-helmet="true" property="og:description" content="Applicable when using Azure Databricks as compute"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Setup Shared Storage"><link data-react-helmet="true" rel="alternate" href="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Setup Shared Storage" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ja-guzzle.github.io/docs/docs/How to guides/Administration/Environment config/Setup Shared Storage" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.ab43cd5c.css">
<link rel="preload" href="/docs/assets/js/runtime~main.f8084dee.js" as="script">
<link rel="preload" href="/docs/assets/js/main.3411638d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/docs/introduction to guzzle">Docs</a><a class="navbar__item navbar__link" href="/docs/Api/api">API</a><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_3rmH"></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/docs/introduction to guzzle">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Api/api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/blog">Blog</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/docs/introduction to guzzle">Introduction to guzzle</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Concepts/concepts">concepts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Getting started/getting-started">getting-started</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How to guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Environment config</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/How to guides/Administration/Environment config/Repository database">Repository database</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/docs/How to guides/Administration/Environment config/Setup Shared Storage">Setup Shared Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/How to guides/Administration/Environment config/Timeout and Sync">Timeout and Sync</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Maintenance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Maintenance/JWT">JWT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Maintenance/Schedule">Schedule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Maintenance/View service log">View service log</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Security/Azure Single Sign On">Azure Single Sign On</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Administration/Security/User management">User management</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Author</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Author/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Computes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Computes/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Datastores</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Datastores/Server file system">Server file system</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Governance/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Ingest data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Ingest data/Ingest Data from Local file system to MySQL Database">Ingest Data from Local file system to MySQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Ingest data/Working with JSON Files">Working with JSON Files</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Monitor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Monitor/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Orchestration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Orchestration/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Parameters</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Parameters/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Process data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Process data/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/How to guides/Security/introduction to guzzle">Introduction to guzzle</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/References/introduction to guzzle">Introduction to guzzle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Samples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Resources/Samples/introduction to guzzle">Introduction to guzzle</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/Tutorials/introduction to guzzle">Introduction to guzzle</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Setup Shared Storage</h1></header><div class="markdown"><p><strong>Applicable when using Azure Databricks as compute</strong></p><p>Guzzle home (also referred as GUZZLE_HOME) stores the binaries and configs on a file system which should be accessible to both the Guzzle VM and the compute where the <strong>activities </strong>will run<strong>. </strong> Below architecture diagram explains this further </p><p><img alt="image alt text" src="/docs/assets/images/setup_shared_storage0-5764a2f8337a5122a7cb0d497b79e1d1.png"></p><p>When using Azure Databricks compute for running activities, it is mandatory to enable shared storage using Azure blob storage. A shared storage simply means mounting the same Azure blob storage account on both Guzzle VM and Azure Databricks workspace so that both this component can point to the same GUZZLE_HOME which contains the Guzzle configs, log files, and binaries. </p><p>When you enable shared storage, Guzzle will do a one time copy of configs and binaries in GUZZLE_HOME directory on Guzzle VM (which is located at /guzzle/guzzlehome). to the blob storage. It will also ensure that Azure blob storage is mounted on Guzzle VM using <a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-how-to-mount-container-linux" target="_blank" rel="noopener noreferrer">Blob fuse</a> and automatically mount and unmount when the Guzzle services  or Guzzle VM is restarted. </p><p>Similarly the Azure blob storage container is also mounted on Azure Databricks workspace by running &quot;Setup Workspace&quot; wizard on compute UI</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note: </h5></div><div class="admonition-content"><p>Once shared storage is enabled, you will not be able to disable it.. </p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="steps-to-enable-shared-storage"></a>Steps to Enable Shared Storage<a class="hash-link" href="#steps-to-enable-shared-storage" title="Direct link to heading">#</a></h2><ol><li><p>Go to the Admin menu from the top navigation bar.</p></li><li><p>Navigate to Environment-&gt; Shared Storage and click on &quot;Enable&quot; </p></li><li><p>Enter following configuration details:</p></li></ol><p><img alt="image alt text" src="/docs/assets/images/setup_shared_storage1-6febba73e1e516d813b4b303734f3a9f.png"></p><table><tr><td>Property </td><td>Description</td><td>Default Value</td><td>Required</td></tr><tr><td>Account Name</td><td>Specify the Azure Storage Account Name. </td><td>None</td><td>Yes</td></tr><tr><td>Container</td><td>Specify the Azure storage container name</td><td>None</td><td>Yes</td></tr><tr><td>Access Key</td><td>Manual: Enter the storage storage access key Key Vault: Specify the Keyvault name and Secret</td><td>None</td><td>Yes</td></tr><tr><td>Container Directory</td><td>Specify directory inside the container where GUZZLE_HOME has to be setup You can specify / (or root directory) if the GUZZLE_HOME  has to be setup in the root directory of the container</td><td>None</td><td>Yes</td></tr><tr><td>Force Clean</td><td>You can check this option to cleanup existing files in the container before initializing the GUZZLE_HOME If kept unchecked, guzzle_will merge the files of GUZZLE_HOME with the existing ones in that directory</td><td>False</td><td>No</td></tr><tr><td>Databricks Secret</td><td>Below information is utilized when setting up Databricks Workspace to mount the Azure storage account. The details of setting up Databricks Workspace is covered  here Secret Scope: This is the secret scope defined in databricks workspace Secret Key: This is the secret containing the access key for the storage account that is to be used for shared storage Refer to this articles to create Databricks Secret Scope and secrets</td><td>None</td><td>No</td></tr></table><p>Guzzle will validate the shared storage configuration ensuring the storage account, container, access key, and folder are valid before enabling the shared storage.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="steps-to-edit-the-shared-storage-configuration"></a>Steps to edit the Shared Storage configuration<a class="hash-link" href="#steps-to-edit-the-shared-storage-configuration" title="Direct link to heading">#</a></h2><p>Guzzle allows you to update Shared storage configuration when there is a change in the access keys, or if a storage account, container or directory.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note: </h5></div><div class="admonition-content"><p>When there is change in storage account, container or folder name, Guzzle will copy the configs, logs and Guzzle binaries  from the existing storage account /container container / folder to the new one. This process can take many minutes depending on the size of log files and config directories. </p></div></div><p>Below are the steps to edit the existing Shared Storage configuration: </p><ol><li><p>Go to the Admin menu from the top navigation bar.</p></li><li><p>Navigate to Environment-&gt; Shared Storage </p></li><li><p>Update the required configuration details</p></li><li><p>Click on Update button</p></li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/How to guides/Administration/Environment config/Setup Shared Storage.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/docs/How to guides/Administration/Environment config/Repository database"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Repository database</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/docs/How to guides/Administration/Environment config/Timeout and Sync"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Timeout and Sync Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#steps-to-enable-shared-storage" class="table-of-contents__link">Steps to Enable Shared Storage</a></li><li><a href="#steps-to-edit-the-shared-storage-configuration" class="table-of-contents__link">Steps to edit the Shared Storage configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Guzzle, Inc.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.f8084dee.js"></script>
<script src="/docs/assets/js/main.3411638d.js"></script>
</body>
</html>