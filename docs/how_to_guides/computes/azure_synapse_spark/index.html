<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Guzzle Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Guzzle Blog Atom Feed"><title data-react-helmet="true">Azure Synapse Spark | Guzzle</title><meta data-react-helmet="true" property="og:url" content="https://guzzle.justanalytics.com/docs/how_to_guides/computes/azure_synapse_spark"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Azure Synapse Spark | Guzzle"><meta data-react-helmet="true" name="description" content="Prerequisites"><meta data-react-helmet="true" property="og:description" content="Prerequisites"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://guzzle.justanalytics.com/docs/how_to_guides/computes/azure_synapse_spark"><link data-react-helmet="true" rel="alternate" href="https://guzzle.justanalytics.com/docs/how_to_guides/computes/azure_synapse_spark" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://guzzle.justanalytics.com/docs/how_to_guides/computes/azure_synapse_spark" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a9a821e7.css">
<link rel="preload" href="/assets/js/runtime~main.aaa107e2.js" as="script">
<link rel="preload" href="/assets/js/main.b56963d5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/api/api">API</a><a class="navbar__item navbar__link" href="/docs/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_3rmH"></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/api/api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/changelog">Changelog</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/overview">What is Guzzle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/deploying_guzzle_on_microsoft_azure">Deploying Guzzle on Microsoft Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/deploying_guzzle_on_aws">Deploying Guzzle on AWS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/overview">overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_lfs_to_mysql">Ingest Data from Local file System to MySQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_azure_blob_storage_to_delta_table">Ingest Data from Azure Blob Storage to Delta Table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_blob_to_azureSQL">Ingest Data from Azure Blob Storage to AzureSQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_rest_api_to_jdbc">Ingest Data from REST Api to JDBC Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_delta_to_adls">Ingest Data From Delta table to Azure Data Lake Storage</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How to Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/features/guzzle_cli">Guzzle CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/features/how_key_vault_is_used_to_integrate_guzzle">Use Azure Key Vault with Guzzle</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Connection and Environment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/connection_and_environment/connection_and_environment">Connection and Environment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/repository_database">Repository Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/setup_shared_storage">Shared Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/timeout_and_sync">Timeout and Sync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/maintenance/jwt">JWT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/maintenance/schedule">Schedule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/maintenance/view_service_log">View Service Log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/security/azure_single_sign_on">Azure Single Sign On</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/security/user_management">User Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/azure_monitor">Azure Monitor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/api_settings">Api Settings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/housekeeping">Housekeeping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Author</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/author">Author</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/external">External</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/git_integration_and_version_control">Git Integration and Version Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/schedule">Schedule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/copy_data_tool">Copy Data Tool</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Computes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/computes/azure_databricks">Azure Databricks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/computes/local_spark">Local Spark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/computes/yarn">Yarn</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/how_to_guides/computes/azure_synapse_spark">Azure Synapse Spark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/computes/aws_glue">AWS Glue</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/computes/aws_emr-ec2">AWS EMR Ec2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/computes/aws_emr-serverless">AWS EMR Serverless</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/computes/aws_databricks">AWS Databricks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Datastores</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/datastore_overview">Datastore Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/amazon_s3">Amazon S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/azure_data_factory">Azure Data Factory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/adls_gen2">Azure Data Lake Storage Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/azure_sql">Azure SQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/databricks_file_system">Databricks File System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/delta_lake">Delta Lake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/hdfs">HDFS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/hive">Hive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/server_file_system">Server File System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/rest">Rest Api</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/jdbc">JDBC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/azure_synapse_analytics">Azure Synapse Analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/azure_synapse_analytics_native">Azure Synapse Analytics Native</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/snowflake">Snowflake</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/governance/constraint_checks">Constraints Check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/governance/housekeeping_hive_and_delta_tables">Housekeeping Hive and Delta tables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/governance/reconcilation_of_data">Reconcilation of data accross two tables</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Ingest Data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_delimited_files">Working with Delimited Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_json_files">Working with JSON Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_xml_files">Working with XML Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_text_and_log_files">Working with Text and Log Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_excel_files">Working with Excel Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_fixed_length_files">Working with Fixed Length Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_big_data">Working with Big Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_multiple_files">Working with Multiple Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_delta_lake">Working with Delta Lake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_jdbc">Working with JDBC Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_azureSQL">Working with AzureSQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_azure_synapse_analytics">Working with Azure Synapse Analytics Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_hive">Working with Hive Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/working_with_rest_api">Working with REST Api</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/validation_and_transformation">Validation and Transformation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/column_restrictions">Column Restrictions-Exclude and Include Columns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/configure_control_file">Configure Control File</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/moving_processed_files">Moving Processed FIles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/processing">Processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/watermark">Watermark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/pre-SQL_and_post-SQL_in_ingestion">Pre-SQL and Post-SQL for Source and Target in Ingestion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/derivation_strategies">Schema Derivation Strategies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/overwrite_and_append_operatoins">How overwrite and append operation works in Guzzle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/schema_drift">Schema Drift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/configure_truncate_partition_columns">Truncate Partition Columns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/example_ingest_data">Ingest Data from Local file System to MySQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/ingestion_data_validation">Ingestion Data Validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/ingestion_datatype_validation">Ingestion Datatype Validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/effective_column_mapping">Effective Column Mapping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Pipelines</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/pipeline">Pipeline</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Batches</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/batch/batch">Batch</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Housekeeping</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/housekeeping">Housekeeping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Processing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/Processing/Processing">Processing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Parameter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/parameters/parameters">Parameter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/parameters/spark_parameters">Spark Parameters</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Running Guzzle Activity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/running_guzzle_activity/running_guzzle_activity">Running Guzzle Activity</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Monitor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/monitor/monitor">Monitor</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Resources/overview">overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/changelog">Guzzle Changelog</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Azure Synapse Spark</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><ul><li>Below are the Azure resources which will be required when leveraging Synapse Spark in Guzzle</li></ul><table><thead><tr><th>Resource</th><th>Description</th><th>Steps for creating the resources</th><th>Information to retrieve (which is then used for Guzzle environment configurations and  setting up Computes/data stores)</th></tr></thead><tbody><tr><td>Synapse Workspace</td><td>Synapse workspace to be used for Guzzle.</td><td><a href="https://learn.microsoft.com/en-us/azure/synapse-analytics/quickstart-create-workspace" target="_blank" rel="noopener noreferrer">Steps to create synapse workspace</a></td><td>Development endpoint URL</td></tr><tr><td>Synapse Spark Pool</td><td>Spark pool added in synapse workspace that will be used by Guzzle</td><td><a href="https://learn.microsoft.com/en-us/azure/synapse-analytics/quickstart-create-apache-spark-pool-portal" target="_blank" rel="noopener noreferrer">Steps to setup synapse spark pool</a></td><td>-</td></tr><tr><td>App Registration</td><td>Register service principal app for Guzzle and generate secret <br> - This app registration is being used for Authentication and hence and the steps for Authentication setup can be skipped.</td><td><a href="https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application" target="_blank" rel="noopener noreferrer">App Registration steps</a></td><td>Client Id, Client Secret and Tenant ID (From App registration overview)</td></tr><tr><td>Blob Storage Account</td><td>Blob account used for shared storage account permission to Storage Blob Data Contributor. Select Service principal(Registered App) as Member. <br> - You need to disable soft delete because we are using ADFS protocol to access (for databricks). <br> - Disable Blob Storage Soft Delete</td><td><a href="https://learn.microsoft.com/en-us/azure/storage/blobs/assign-azure-role-data-access?tabs=portal" target="_blank" rel="noopener noreferrer">Steps to assign Storage Blob Data Contributor role to service principal</a></td><td>-</td></tr><tr><td>Key Vault</td><td>Key vault used to store different credentials (assumes one key vault is used to store all the credentials which are required for Guzzle environment configurations and data stores)</td><td><a href="https://learn.microsoft.com/en-us/azure/key-vault/general/assign-access-policy?tabs=azure-portal" target="_blank" rel="noopener noreferrer">Assign a Key Vault access policy</a></td><td>-</td></tr></tbody></table><ul><li>This are the permissions to be granted to different AAD principals (User/groups/service principals / managed identity) on different resources (follow standard Azure document to grant permissions)</li></ul><table><thead><tr><th>AAD principal   (User/groups/service principals / managed identity)</th><th>Resources</th><th>RBAC (permission)</th><th>Purpose</th></tr></thead><tbody><tr><td>Guzzle VM system identity (or user defined identity)</td><td>Key Vault</td><td>Secret permission: Get, List, Set</td><td>Guzzle VM needs to retrieve keys from key vault and also need to save passphrase in the KV for <b>Sync Passphrase</b> function in for API <a href="https://guzzle.justanalytics.com/docs/how_to_guides/administration/environment_config/api_settings/" target="_blank" rel="noopener noreferrer">Api Settings - Guzzle </a></td></tr><tr><td>Azure Service principal  (App Registration)</td><td>Primary storage ADLS</td><td>Blob Contributor</td><td>The spark jobs will read and write log files/temp files in the Primary storage as part of the job run. Since the job is run using service principal (app registration), same has to be grated read write permission  on primary ADLS</td></tr><tr><td>Azure Service principal  (App Registration)</td><td>Synapse workspace</td><td>In Add role assignment section: <br> - In Add role assignment section: <br> - Role - &gt; Synapse Admin</td><td>Guzzle will submit the jobs to Synapse workspace and run the jobs spark pool - for this it needs minimum: Synapse Admin permission.</td></tr><tr><td>Azure Service principal  (App Registration)</td><td>Key Vault</td><td>Secret permission: Get, List, Set</td><td>The job which runs on spark-pool are submitted using service principal (app registration), and will need to retrieve the credential from KV for the data store</td></tr><tr><td>Azure Service principal  (App Registration)</td><td>Blob Storage</td><td>Blob Reader</td><td>The job which runs on spark-pool are submitted using service principal (app registration), and will need to retrieve guzzle binaries from the shared storage ( we only need to read binaries) <br> - The guzzle binaries are written into shared storage by Guzzle VM using account key or service principal depending on what is configured in this setup: Shared Storage - Guzzle</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="guzzle-network-diagram-for-public-endpoint"></a>Guzzle Network Diagram for public endpoint<a class="hash-link" href="#guzzle-network-diagram-for-public-endpoint" title="Direct link to heading">#</a></h2><img width="600" src="/img/docs/how-to-guides/compute/synapse/synapse_1.png"><ul><li>Synapse workspace is available on public network (as per default setup) the Developer endpoint can be connected over internet. Click here for more information. All this traffic are on public end point</li><li>The job which runs on spark-pool are submitted using service principal (app registration)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="guzzle-vm-connection-table-for-public-endpoint"></a>Guzzle VM Connection Table for public endpoint<a class="hash-link" href="#guzzle-vm-connection-table-for-public-endpoint" title="Direct link to heading">#</a></h2><table><thead><tr><th>#</th><th>Source</th><th>Target</th><th>Protocol / /port</th><th>Authentication Mechanism</th><th>Purpose of Connection</th><th>Traffic Type</th><th>Notes (latency , through put, special security)</th></tr></thead><tbody><tr><td>1</td><td>Guzzle VM</td><td>BLOB for Guzzleâ€‹</td><td>HTTPS</td><td>Managed Identity (system generated â€‹ or user defined identity of Guzzle VM)</td><td>To store jars, third party library on blob for jobs on spark compute to readâ€‹</td><td>Public</td><td>-</td></tr><tr><td>2</td><td>Guzzle VMâ€‹</td><td>Azure SQL for Guzzleâ€‹</td><td>HTTPS</td><td>AAD user credential / native SQL accountâ€‹</td><td>Read/write Guzzle audit and metadataâ€‹</td><td>Public</td><td>-</td></tr><tr><td>3</td><td>Guzzle VMâ€‹</td><td>Key Vaultâ€‹</td><td>HTTPS</td><td>Managed Identity (system generated â€‹ or user defined identity of Guzzle VM)</td><td>Get stored secrets and keysâ€‹</td><td>Public</td><td>-</td></tr><tr><td>4</td><td>Guzzle VMâ€‹</td><td>Synapse Developer Endpoint</td><td>HTTPS</td><td>App Registration</td><td>Submit jobs to Spark Poolâ€‹</td><td>Public</td><td>-</td></tr><tr><td>5</td><td></td><td>Spark Pool</td><td>Synapse Dedicated Poolâ€‹ (using Azure Synapse Native datastore)</td><td>HTTPS</td><td>App Registration which is specified in compute or Native user/password</td><td><b>Authentication Mechanism:</b> <br> - App Registration which is specified in compute or Native user/password  <br> - the external data source includes an authentication method, that&#x27;s why <br> - <b>purpose of connection:</b> <br> - for Ingestion: To read and write (connector) <br> - for processing: To run template SQL (JDBC connection) <br> - for DQ/Recon: To read (connector)</td><td>Public</td></tr><tr><td>6</td><td>Guzzle VM</td><td>Synapse Dedicated Poolâ€‹ (using Azure Synapse)</td><td>HTTPS</td><td>Native user/password</td><td>Processing jobs run directly from Guzzle VM against API</td><td>Public</td><td>-</td></tr><tr><td>7</td><td>Spark pool</td><td>Guzzle VM</td><td>HTTPS</td><td>temp API key which is part of request and decrypted using passphrase in KV</td><td>Spark job to connect to guzzle API to retrieve config</td><td>-</td><td>-</td></tr><tr><td>8</td><td>Spark pool</td><td>Blob storage</td><td>HTTPS</td><td>App Registration</td><td>Spark jobs to retrieve the config</td><td>-</td><td>-</td></tr><tr><td>9</td><td>Spark pool</td><td>Azure SQL</td><td>HTTPS</td><td>user/password or App Registration specified</td><td>to update repo tables</td><td>-</td><td>-</td></tr><tr><td>10</td><td>Spark pool</td><td>Primary ADLS</td><td>HTTPS</td><td>App Registration</td><td>to read/write logs</td><td>-</td><td>-</td></tr><tr><td>11</td><td>Spark pool</td><td>Key vault</td><td>HTTPS</td><td>App Registration</td><td>to fetch secrets from KV</td><td>-</td><td>-</td></tr><tr><td>12</td><td>Spark pool</td><td>Synapse Developer Endpoint</td><td>HTTPS</td><td>App Registration</td><td>it will connect to Synapse Developer end point to stop the job</td><td>-</td><td>-</td></tr></tbody></table><ul><li>Apart from this, there will be additional network traffic between spark pool to source and target used in the ingestion/processing job.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="guzzle-network-diagram-for-private-endpoint"></a>Guzzle Network Diagram for private endpoint<a class="hash-link" href="#guzzle-network-diagram-for-private-endpoint" title="Direct link to heading">#</a></h2><img width="600" src="/img/docs/how-to-guides/compute/synapse/synapse_2.png"><table><thead><tr><th>Resource</th><th>Azure Documentation Link</th><th>Purpose</th></tr></thead><tbody><tr><td>Storage Account</td><td><a href="https://learn.microsoft.com/en-gb/azure/storage/common/storage-network-security?tabs=azure-portal#change-the-default-network-access-rule" target="_blank" rel="noopener noreferrer">Configure Azure Storage firewalls and virtual networks </a> <br> <a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-private-endpoints" target="_blank" rel="noopener noreferrer">Use private endpoints - Azure Storage </a></td><td>Disable public access and create private endpoint to access blob privately.</td></tr><tr><td>SQL Server</td><td><a href="https://learn.microsoft.com/en-us/azure/mysql/single-server/how-to-deny-public-network-access" target="_blank" rel="noopener noreferrer">Deny Public Network Access - Azure portal - Azure Database for MySQL </a></td><td>Disable public access and create 2 private endpoint: <br> 1. Guzzle Vm <br> 2. Synapse workspace</td></tr><tr><td>Key Vault</td><td><a href="https://learn.microsoft.com/en-us/azure/key-vault/general/private-link-service?tabs=portal" target="_blank" rel="noopener noreferrer">Integrate Key Vault with Azure Private Link</a></td><td>Disable public access on azure key vault and used as private endpoint</td></tr><tr><td>Synapse Private Endpoint</td><td><a href="https://learn.microsoft.com/en-gb/azure/synapse-analytics/security/how-to-set-up-access-control" target="_blank" rel="noopener noreferrer">Access control in Synapse workspace how to - Azure Synapse Analytics </a></td><td>Add all private endpoint to synapse. <br> 1. Storage Account <br> 2. Key Vault <br> 3. SQL Server <br> 4. Private Link Service</td></tr><tr><td>Private Link Service With Load Balancer</td><td><a href="https://learn.microsoft.com/en-us/azure/private-link/create-private-link-service-portal?tabs=dynamic-ip" target="_blank" rel="noopener noreferrer">Quickstart - Create a Private Link service - Azure portal - Azure Private Link </a></td><td>To access Guzzle VM in private network, we need to create private link service.</td></tr><tr><td>Guzzle API Setting</td><td>-</td><td>Change Guzzle API Setting with private link service fully qualified domain name.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="guzzle-vm-connection-table-for-private-endpoint"></a>Guzzle VM Connection Table for private endpoint<a class="hash-link" href="#guzzle-vm-connection-table-for-private-endpoint" title="Direct link to heading">#</a></h2><table><thead><tr><th>#</th><th>Source</th><th>Target</th><th>Protocol / Port</th><th>Authentication Mechanism</th><th>Purpose of connection</th><th>Traffic Type</th></tr></thead><tbody><tr><td>1</td><td>Guzzle VM</td><td>Storage Account for Guzzleâ€‹</td><td>HTTPS</td><td>Managed Identityâ€‹</td><td>To storage jars, third party library on blob for spark compute to readâ€‹</td><td>Private</td></tr><tr><td>2</td><td>Guzzle VM</td><td>Azure SQL for Guzzle</td><td>HTTPS</td><td>AAD user credential / SASâ€‹</td><td>Read/write Guzzle audit and metadataâ€‹â€‹</td><td>Private</td></tr><tr><td>3</td><td>Guzzle VM</td><td>Key Vaultâ€‹</td><td>HTTPS</td><td>Managed Identityâ€‹</td><td>Get stored secrets and keysâ€‹â€‹</td><td>Private</td></tr><tr><td>4</td><td>Guzzle VM</td><td>Databricks Control Planeâ€‹</td><td>HTTPS</td><td>Managed Identityâ€‹</td><td>Submit jobs to Databricks Clusterâ€‹</td><td>Private</td></tr><tr><td>5</td><td>Guzzle VM</td><td>Synapse Control Planeâ€‹</td><td>HTTPS</td><td>Managed Identityâ€‹</td><td>Submit jobs to Spark Poolâ€‹â€‹</td><td>Private</td></tr><tr><td>6</td><td>Guzzle VMâ€‹</td><td>Synapse Dedicated Poolâ€‹</td><td>HTTPS</td><td>Managed Identityâ€‹</td><td>Submit jobs to Synapse dedicated poolâ€‹</td><td>Private</td></tr><tr><td>7</td><td>Guzzle VMâ€‹</td><td>Guzzle VMâ€‹</td><td>HTTPS</td><td>Managed Identityâ€‹</td><td>Update logs, retrieve configs from Guzzleâ€‹</td><td>Private</td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><ul><li>Before running Job with Synapse it requires to have necessary guzzle setup.<ul><li><a href="https://corpinfollc.atlassian.net/wiki/spaces/APS/pages/119138614575164" target="_blank" rel="noopener noreferrer">Shared Storage Setup</a></li><li><a href="https://corpinfollc.atlassian.net/wiki/spaces/APS/pages/119138614706203" target="_blank" rel="noopener noreferrer">Guzzle Repo database setup</a></li><li><a href="https://corpinfollc.atlassian.net/wiki/spaces/APS/pages/119138613723943" target="_blank" rel="noopener noreferrer">Key Vault setup for guzzle</a></li></ul></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="synapse-compute-support-matrix"></a>Synapse Compute Support Matrix<a class="hash-link" href="#synapse-compute-support-matrix" title="Direct link to heading">#</a></h2><p>Please follow Guzzle official documentation for synapse compute support with different data sources. Click <a href="https://guzzle.justanalytics.com/docs/how_to_guides/datastores/datastore_overview/#datastore-and-compute-matrix" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="guzzle-configurations"></a>Guzzle Configurations<a class="hash-link" href="#guzzle-configurations" title="Direct link to heading">#</a></h2><img width="600" src="/img/docs/how-to-guides/compute/synapse/synapse_3.png"><table><thead><tr><th>Property</th><th>Description</th><th>Default Value</th><th>Required</th></tr></thead><tbody><tr><td>Synapse workspace URL</td><td>Specify the URL of the Azure Synapse workspace. You will find this url as Development endpoint in Synapse workspace overview page in Azure portal</td><td>None</td><td>Yes</td></tr><tr><td>Spark pool name</td><td>Specify the spark pool name that will be used by Guzzle</td><td>None</td><td>Yes</td></tr><tr><td>Credential Type</td><td>Specify the credential type to connect to the Azure Synapse</td><td>Service principal</td><td>Yes</td></tr><tr><td>Client Id</td><td>Azure Active Directory provided client Id( also called an application ID). The register app in Azure Active Directory provides one unique id for associate to application. The client id of the created application in above steps.</td><td>None</td><td>Yes</td></tr><tr><td>Client Secret</td><td>Azure Active Directory Client Secret. Provide the client secret of the application that is created in above steps. Guzzle used this for verify and generate access key of the user authentication</td><td>None</td><td>Yes</td></tr><tr><td>Tenant Id</td><td>The unique identifier of the Azure Active Directory instance also called directory ID. A tenant represents an organization. Provide the tenant id of the application. It&#x27;s a dedicated instance of Azure AD that an organization or app developer receives at the beginning of a relationship with Microsoft</td><td>None</td><td>Yes</td></tr><tr><td>Driver Memory</td><td>Specify the allocated driver memory for running jobs</td><td>None</td><td>No</td></tr><tr><td>Driver Cores</td><td>Specify the allocated driver cores for running jobs</td><td>None</td><td>No</td></tr><tr><td>Executor Memory</td><td>Specify the allocated executor memory for running jobs</td><td>None</td><td>No</td></tr><tr><td>Executor Cores</td><td>Specify the allocated executor cores for running jobs</td><td>None</td><td>No</td></tr><tr><td>Number of executors</td><td>Specify the number of spark executors you want the job to run</td><td>None</td><td>No</td></tr><tr><td>Customize spark config</td><td>Specify additional Spark configuration options. Specify the config name and config value</td><td>None</td><td>No</td></tr><tr><td>Custom cluster tags</td><td>Apply tags to the cluster. Specify the name of tag and value</td><td>None</td><td>No</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-guzzle-job-with-synapse-spark"></a>Run Guzzle Job with Synapse Spark<a class="hash-link" href="#run-guzzle-job-with-synapse-spark" title="Direct link to heading">#</a></h2><img width="600" src="/img/docs/how-to-guides/compute/synapse/synapse_4.png"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="guzzle-monitor-ui"></a>Guzzle Monitor UI<a class="hash-link" href="#guzzle-monitor-ui" title="Direct link to heading">#</a></h2><img width="600" src="/img/docs/how-to-guides/compute/synapse/synapse_5.png"></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ja-guzzle/docs/blob/master/docs/how_to_guides/computes/azure_synapse_spark.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/how_to_guides/computes/yarn"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Yarn</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/how_to_guides/computes/aws_glue"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AWS Glue Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#guzzle-network-diagram-for-public-endpoint" class="table-of-contents__link">Guzzle Network Diagram for public endpoint</a></li><li><a href="#guzzle-vm-connection-table-for-public-endpoint" class="table-of-contents__link">Guzzle VM Connection Table for public endpoint</a></li><li><a href="#guzzle-network-diagram-for-private-endpoint" class="table-of-contents__link">Guzzle Network Diagram for private endpoint</a></li><li><a href="#guzzle-vm-connection-table-for-private-endpoint" class="table-of-contents__link">Guzzle VM Connection Table for private endpoint</a></li><li><a href="#synapse-compute-support-matrix" class="table-of-contents__link">Synapse Compute Support Matrix</a></li><li><a href="#guzzle-configurations" class="table-of-contents__link">Guzzle Configurations</a></li><li><a href="#run-guzzle-job-with-synapse-spark" class="table-of-contents__link">Run Guzzle Job with Synapse Spark</a></li><li><a href="#guzzle-monitor-ui" class="table-of-contents__link">Guzzle Monitor UI</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Just Analytics, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aaa107e2.js"></script>
<script src="/assets/js/main.b56963d5.js"></script>
</body>
</html>