<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Guzzle Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Guzzle Blog Atom Feed"><title data-react-helmet="true">Schema Derivation Strategies | Guzzle</title><meta data-react-helmet="true" property="og:url" content="https://guzzle.justanalytics.com/docs/how_to_guides/ingest_data/derivation_strategies"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Schema Derivation Strategies | Guzzle"><meta data-react-helmet="true" name="description" content="* Guzzle provides five schema derivation strategies. Using these strategies Guzzle will validate the data type and will also create an effective schema based on that data will be written in the target and reject table. The schema derivation strategies include:"><meta data-react-helmet="true" property="og:description" content="* Guzzle provides five schema derivation strategies. Using these strategies Guzzle will validate the data type and will also create an effective schema based on that data will be written in the target and reject table. The schema derivation strategies include:"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://guzzle.justanalytics.com/docs/how_to_guides/ingest_data/derivation_strategies"><link data-react-helmet="true" rel="alternate" href="https://guzzle.justanalytics.com/docs/how_to_guides/ingest_data/derivation_strategies" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://guzzle.justanalytics.com/docs/how_to_guides/ingest_data/derivation_strategies" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a9a821e7.css">
<link rel="preload" href="/assets/js/runtime~main.eb1bd2a6.js" as="script">
<link rel="preload" href="/assets/js/main.ed9eb612.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/introduction/overview">Docs</a><a class="navbar__item navbar__link" href="/api/api">API</a><a class="navbar__item navbar__link" href="/docs/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_3rmH"></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/introduction/overview">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/api/api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/changelog">Changelog</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/overview">What is Guzzle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/deploying_guzzle_on_microsoft_azure">Deploying Guzzle on Microsoft Azure</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/overview">overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_lfs_to_mysql">Ingest Data from Local file System to MySQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_azure_blob_storage_to_delta_table">Ingest Data from Azure Blob Storage to Delta Table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_blob_to_azureSQL">Ingest Data from Azure Blob Storage to AzureSQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_rest_api_to_jdbc">Ingest Data from REST Api to JDBC Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Tutorials/ingest_data_from_delta_to_adls">Ingest Data From Delta table to Azure Data Lake Storage</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How to Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/features/guzzle_cli">Guzzle CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/features/how_key_vault_is_used_to_integrate_guzzle">Use Azure Key Vault with Guzzle</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Connection and Environment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/connection_and_environment/connection_and_environment">Connection and Environment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/repository_database">Repository Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/setup_shared_storage">Setup Shared Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/timeout_and_sync">Timeout and Sync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/maintenance/jwt">JWT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/maintenance/schedule">Schedule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/maintenance/view_service_log">View Service Log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/security/azure_single_sign_on">Azure Single Sign On</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/security/user_management">User Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/administration/environment_config/azure_monitor">Azure Monitor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Author</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/author">Author</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/external">External</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/git_integration_and_version_control">Git Integration and Version Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/schedule">Schedule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/author/copy_data_tool">Copy Data Tool</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Computes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/computes/azure_databricks">Azure Databricks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/computes/local_spark">Local Spark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/computes/yarn">Yarn</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/computes/azure_synapse_spark">Synapse Spark Pool (Preview)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Datastores</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/datastore_overview">Datastore Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/amazon_s3">Amazon S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/azure_data_factory">Azure Data Factory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/adls_gen2">Azure Data Lake Storage Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/azure_sql">Azure SQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/databricks_file_system">Databricks File System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/delta_lake">Delta Lake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/hdfs">HDFS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/hive">Hive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/server_file_system">Server File System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/rest">Rest Api</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/jdbc">JDBC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/datastores/azure_synapse_analytics">Azure Synapse Analytics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/governance/constraint_checks">Constraints Check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/governance/housekeeping_hive_and_delta_tables">Housekeeping Hive and Delta tables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/governance/reconcilation_of_data">Reconcilation of data accross two tables</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Ingest Data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_delimited_files">Working with Delimited Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_json_files">Working with JSON Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_xml_files">Working with XML Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_text_and_log_files">Working with Text and Log Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_excel_files">Working with Excel Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_fixed_length_files">Working with Fixed Length Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_big_data">Working with Big Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_multiple_files">Working with Multiple Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_delta_lake">Working with Delta Lake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_jdbc">Working with JDBC Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_azureSQL">Working with AzureSQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_azure_synapse_analytics">Working with Azure Synapse Analytics Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_hive">Working with Hive Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/working_with_rest_api">Working with REST Api</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/validation_and_transformation">Validation and Transformation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/column_restrictions">Column Restrictions-Exclude and Include Columns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/configure_control_file">Configure Control File</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/moving_processed_files">Moving Processed FIles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/processing">Processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/watermark">Watermark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/pre-SQL_and_post-SQL_in_ingestion">Pre-SQL and Post-SQL for Source and Target in Ingestion</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/how_to_guides/ingest_data/derivation_strategies">Schema Derivation Strategies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/overwrite_and_append_operatoins">How overwrite and append operation works in Guzzle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/schema_drift">Schema Drift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/configure_truncate_partition_columns">Truncate Partition Columns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_to_guides/ingest_data/example_ingest_data">Ingest Data from Local file System to MySQL Database</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Pipelines</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/pipeline">Pipeline</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Batches</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/batch/batch">Batch</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Housekeeping</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/ingest_data/housekeeping">Housekeeping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Parameter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/parameters/Parameters">Parameters</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Monitor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how_to_guides/monitor/monitor">Monitor</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Resources/overview">overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/changelog">Guzzle Changelog</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Schema Derivation Strategies</h1></header><div class="markdown"><ul><li><p>Guzzle provides five schema derivation strategies. Using these strategies Guzzle will validate the data type and will also create an effective schema based on that data will be written in the target and reject table. The schema derivation strategies include:</p><ol><li>Source</li><li>Inherit source data type and do not apply validation</li><li>Target</li><li>Inherit target data type and do not apply validation</li><li>Do not inherit schema from source or target</li></ol></li><li><p>Users can select schema derivation strategy from <strong>Inherit columns and datatype</strong> property under <strong>Additional settings</strong> dropdown menu in the validation and transformation section.</p></li><li><p>In this article, we will discuss these strategies with examples</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="source"></a>Source<a class="hash-link" href="#source" title="Direct link to heading">#</a></h2><ul><li>If schema derivation strategy is <strong>source</strong> then, columns and data types will be inherited from the source files/table and, validation of data types will be performed based on source data types.</li><li>If the user does not specify the column name in the transformation and validation section then validation for that column will be performed and if the user specifies the source&#x27;s column name in the transformation and validation section then the validation will be performed based on validate data type checkbox.</li><li>Additionally, an effective schema will be created using <ol><li>Source columns and their respective data types.</li><li>Columns and data types are specified in the <strong>validation and transformation</strong> section of the ingestion job.</li></ol></li><li>And this effective schema will be used to create a table if an auto-create table checkbox is checked in the target section and in the reject section.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h3><ul><li><p>In source, a datastore is a file and format is delimited, and the file pattern includes two files that are file1.csv and file2.csv. And infer schema checkbox is checked in the source section. In target, the datastore is the delta table and the auto-create table checkbox is checked and the name of table is <strong>demo_schema_derivation</strong>.</p></li><li><p>The source data are like this </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file1.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1001,n1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1002,n2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file2.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1003,n3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id_1004,n4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>In the validation and transformation section, we have defined </li></ul><ol><li>A new column <strong>full_name</strong> is doing concatenation of <strong>name</strong> column and &quot;_new&quot; string. Since the full_name column does not exist in the source data, and we have provided data type value in the validation and transformation section so, Guzzle will respect that data type value and take that data type for the defined column. If the user does not provide the value of the data type then Guzzle will take <strong>string</strong> as a data type value.</li><li><strong>name</strong> column but a validate data type checkbox is <strong>unchecked</strong>, and also we haven&#x27;t defined any data type so, Guzzle will not validate this column&#x27;s data and the data type for this column will be inherited from the source as the name column is present in the source.</li></ol><a href="https://guzzle.justanalytics.com/img/docs/how-to-guides/ingest_data/schema_derivation_1.png" target="_self" rel="noopener noreferrer"><img width="1000" src="/img/docs/how-to-guides/ingest_data/schema_derivation_1.png"></a><ul><li><p>As shown in the figure that we have defined the data type for <strong>full_name</strong> column <strong>varchar(20)</strong> so, Guzzle will take this data type for the effective schema.</p></li><li><p>While running the ingestion job Guzzle will create the target table using the below query and as schema derivation strategy is the <strong>source</strong> so, it will validate data of source column like datatype for id is an integer so, data which are successfully validated will be stored in the target table and those which are invalid will be stored in reject table/file.</p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE IF NOT EXISTS demo_schema_derivation (`id` integer, `name` string, `full_name` varchar(20));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>After a successful run of this job target table contains the following data: </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">demo_schema_derivation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id   | name | full_name |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1001 | n1   | n1_new    |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1002 | n2   | n2_new    |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1003 | n3   | n3_new    |</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Here, the data with <strong>id=id_1004</strong> is discarded because the data is in string and the data type of <strong>id</strong> column is an <strong>integer</strong>. So, Guzzle will store this data in the reject section.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inherit-source-data-type-and-do-not-apply-validation"></a>Inherit source data type and do not apply validation<a class="hash-link" href="#inherit-source-data-type-and-do-not-apply-validation" title="Direct link to heading">#</a></h2><ul><li>If the schema derivation strategy is <strong>Inherit source data type and do not apply validation</strong> then, columns and data types will be inherited from the source files/table, but the validation of data types will not be performed automatically. This will be based on the validation and transformation section.</li><li>If the user does not specify the column name in the transformation and validation section then validation for that column will not be performed and if the user specifies the source&#x27;s column name in the transformation and validation section then the validation will be performed based on validate data type checkbox.</li><li>Additionally, an effective schema will be created using <ol><li>Source columns and their respective data types.</li><li>Columns and data types are specified in the <strong>validation and transformation</strong> section of the ingestion job.</li></ol></li><li>And this effective schema will be used to create a table if an auto-create table checkbox is checked in the target section and in the reject section.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example-1"></a>Example<a class="hash-link" href="#example-1" title="Direct link to heading">#</a></h3><ul><li><p>In source, a datastore is a file and format is delimited, and the file pattern includes two files that are file1.csv and file2.csv. And infer schema checkbox is checked in the source section. In target, the datastore is the delta table and the auto-create table checkbox is checked and the name of the table is <strong>demo_schema_derivation</strong>.</p></li><li><p>The source data are like this </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file1.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1001,n1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1002,n2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file2.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1003,n3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id_1004,n4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>In the validation and transformation section, we have defined </li></ul><ol><li>A new column <strong>full_name</strong> is doing concatenation of <strong>name</strong> column and &quot;_new&quot; string. Since the full_name column does not exist in the source data, and we have provided data type value in the validation and transformation section so, Guzzle will respect that data type value and take that data type for the defined column. If the user does not provide the value of the data type then Guzzle will take <strong>string</strong> as a data type value.</li><li><strong>name</strong> column but a validate data type checkbox is <strong>unchecked</strong>, and also we haven&#x27;t defined any data type so, Guzzle will not validate this column&#x27;s data and the data type for this column will be inherited from the source as the name column is present in the source.</li></ol><a href="https://guzzle.justanalytics.com/img/docs/how-to-guides/ingest_data/schema_derivation_2.png" target="_self" rel="noopener noreferrer"><img width="1000" src="/img/docs/how-to-guides/ingest_data/schema_derivation_2.png"></a><ul><li><p>As shown in the figure that we have defined the data type for <strong>full_name</strong> column <strong>varchar(20)</strong> so, Guzzle will take this data type for the effective schema.</p></li><li><p>While running the ingestion job Guzzle will create the target table using the below query and as schema derivation strategy is the <strong>Inherit source data type and do not apply validation</strong> so, it will not do direct validation of the source column&#x27;s data. So, Guzzle will take the help of the validation and transformation section on whether to validate or not.</p></li><li><p>If the user wants to validate the data of the id column then the user has to define the id column in the transformation and validation section with the checked validate data type checkbox.</p></li><li><p>And the data that are successfully validated will be stored in the target table and those which are invalid will be stored in the reject table/file.</p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE IF NOT EXISTS demo_schema_derivation (`id` integer, `name` string, `full_name` varchar(20));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>After a successful run of this job target table contains the following data: </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">demo_schema_derivation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id      | name | full_name |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1001    | n1   | n1_new    |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1002    | n2   | n2_new    |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1003    | n3   | n3_new    |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|         | n4   | n4_new    |</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Here, <strong>id</strong> column is not defined in the validation and transformation section so, Guzzle will not validate the data. So, the data with <strong>id=id_1004</strong> is not discarded, and this data is stored in the target table with id value NULL as shown in the above table.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="target"></a>Target<a class="hash-link" href="#target" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If schema derivation strategy is <strong>target</strong> then <strong>auto-create table</strong> checkbox for target section must be <strong>unchecked</strong>, and target table will be there in the database.</p></div></div><ul><li>If schema derivation strategy is <strong>target</strong> then, columns and data types will be inherited from the target files/table and, validation of data types will be performed based on target data types.</li><li>If the user does not specify the column name in the transformation and validation section then validation for that column will be performed and if the user specifies the target&#x27;s column name in the transformation and validation section then the validation will be performed based on validate data type checkbox.</li><li>Additionally, an effective schema will be created using<ol><li>Target columns and their respective data types.</li><li>Columns and data types are specified in the <strong>validation and transformation</strong> section of the ingestion job.</li></ol></li><li>And this effective schema will be used to create a table if an auto-create table checkbox is checked in the reject section.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example-2"></a>Example<a class="hash-link" href="#example-2" title="Direct link to heading">#</a></h3><ul><li><p>In source, a datastore is a file and format is delimited, and the file pattern includes two files that are file1.csv and file2.csv. And infer schema checkbox is checked in the source section. In target, the datastore is the delta table and the name of the table is <strong>demo_schema_derivation</strong>.</p></li><li><p>The source data are like this </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file1.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1001,n1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1002,n2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file2.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1003,n3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id_1004,n4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>The target table data is</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">demo_schema_derivation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id      | name |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1010    | n10  |</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>In the validation and transformation section, we have defined </li></ul><ol><li>A new column <strong>full_name</strong> is doing concatenation of <strong>name</strong> column and &quot;_new&quot; string. Since the full_name column does not exist in the target table, and we have provided data type value in the validation and transformation section so, Guzzle will respect that data type value and take that data type for the defined column. If the user does not provide the value of the data type then Guzzle will take <strong>string</strong> as a data type value.</li><li><strong>name</strong> column but a validate data type checkbox is <strong>unchecked</strong>, and also we haven&#x27;t defined any data type so, Guzzle will not validate this column&#x27;s data and the data type for this column will be inherited from the target as the name column is present in the target.</li></ol><a href="https://guzzle.justanalytics.com/img/docs/how-to-guides/ingest_data/schema_derivation_3.png" target="_self" rel="noopener noreferrer"><img width="1000" src="/img/docs/how-to-guides/ingest_data/schema_derivation_3.png"></a><ul><li><p>As shown in the figure that we have defined the data type for <strong>full_name</strong> column <strong>varchar(20)</strong> so, Guzzle will take this data type for the effective schema but as the target table does not have the <strong>full_name</strong> column, the data for this column will be ignored.</p></li><li><p>While running the ingestion job, as schema derivation strategy is the <strong>target</strong>, Guzzle will validate the data of source column with target data type like datatype for id is an integer so, data which are successfully validated will be stored in the target table and those which are invalid will be stored in reject table/file.</p></li><li><p>After a successful run of this job target table contains the following data: </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">demo_schema_derivation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id   | name |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1001 | n1   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1002 | n2   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1003 | n3   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1010 | n10  |</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Here, the data with <strong>id=id_1004</strong> is discarded because the data is in string and the data type of <strong>id</strong> column in target table is an <strong>integer</strong>. So, Guzzle will store this data in the reject section.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inherit-target-data-types-and-do-not-apply-validation"></a>Inherit target data types and do not apply validation<a class="hash-link" href="#inherit-target-data-types-and-do-not-apply-validation" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If schema derivation strategy is <strong>Inherit target data types and do not apply validation</strong> then <strong>auto-create table</strong> checkbox for target section must be <strong>unchecked</strong>, and target table will be there in the database.</p></div></div><ul><li>If the schema derivation strategy is <strong>Inherit target data types and do not apply validation</strong> then, columns and data types will be inherited from the target files/table and, the validation of data types will not be performed automatically. This will be based on the validation and transformation section.</li><li>If the user does not specify the column name in the transformation and validation section then validation for that column will not be performed and if the user specifies the target&#x27;s column name in the transformation and validation section then the validation will be performed based on validate data type checkbox.</li><li>Additionally, an effective schema will be created using<ol><li>Target columns and their respective data types.</li><li>Columns and data types specified in the <strong>validation and transformation</strong> section of the ingestion job.</li></ol></li><li>And this effective schema will be used to create a table if an auto-create table checkbox is checked in the reject section.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example-3"></a>Example<a class="hash-link" href="#example-3" title="Direct link to heading">#</a></h3><ul><li><p>In source, a datastore is a file and format is delimited, and the file pattern includes two files that are file1.csv and file2.csv. And infer schema checkbox is checked. In target, the datastore is the delta table and the name of the table is <strong>demo_schema_derivation</strong>.</p></li><li><p>The source data are like this </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file1.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1001,n1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1002,n2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file2.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1003,n3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id_1004,n4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>The target table data is</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">demo_schema_derivation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id      | name |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1010    | n10  |</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>In the validation and transformation section, we have defined </li></ul><ol><li>A new column <strong>full_name</strong> is doing concatenation of <strong>name</strong> column and &quot;_new&quot; string. Since the full_name column does not exist in the target table, and we have provided data type value in the validation and transformation section so, Guzzle will respect that data type value and take that data type for the defined column. If the user does not provide the value of the data type then Guzzle will take <strong>string</strong> as a data type value.</li><li><strong>name</strong> column but a validate data type checkbox is <strong>unchecked</strong>, and also we haven&#x27;t defined any data type so, Guzzle will not validate this column&#x27;s data and the data type for this column will be inherited from the target as the name column is present in the target.</li></ol><a href="https://guzzle.justanalytics.com/img/docs/how-to-guides/ingest_data/schema_derivation_4.png" target="_self" rel="noopener noreferrer"><img width="1000" src="/img/docs/how-to-guides/ingest_data/schema_derivation_4.png"></a><ul><li><p>As shown in the figure that we have defined the data type for <strong>full_name</strong> column <strong>varchar(20)</strong> so, Guzzle will take this data type for the effective schema but as the target table does not have the <strong>full_name</strong> column, the data for this column will be ignored.</p></li><li><p>While running the ingestion job, as schema derivation strategy is the <strong>Inherit target data types and do not apply validation</strong>, Guzzle will not do direct validation of the source column&#x27;s data with the target column&#x27;s data type. So, Guzzle will take the help of the validation and transformation section on whether to validate or not.</p></li><li><p>And the data that are successfully validated will be stored in the target table and those which are invalid will be stored in the reject table/file.</p></li><li><p>After a successful run of this job target table contains the following data: </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">demo_schema_derivation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id   | name |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1001 | n1   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1002 | n2   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1003 | n3   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|      | n4   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1010 | n10  |</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Here, id column is not defined in the validation and transformation section so, Guzzle will not validate the data for that column. So, the data with id=id_1004 is not discarded, and this data is stored in the target table with id value NULL as shown in the above table.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="do-not-inherit-schema-from-source-or-target"></a>Do not inherit schema from source or target<a class="hash-link" href="#do-not-inherit-schema-from-source-or-target" title="Direct link to heading">#</a></h2><ul><li>If the schema derivation strategy is <strong>Do not inherit schema from source or target</strong> then, columns and data types will be inherited from the transformation and validation section and, the validation of data types will be performed based on the validate data type checkbox. If the checkbox is checked then validation of that column will be performed, if unchecked then validation will not be performed.</li><li>Additionally, an effective schema will be created using <ol><li>columns and data types specified in the <strong>validation and transformation</strong> section of the ingestion job.</li></ol></li><li>And this effective schema will be used to create a table if an auto-create table checkbox is checked in the target section and in the reject section.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example-4"></a>Example<a class="hash-link" href="#example-4" title="Direct link to heading">#</a></h3><ul><li><p>In source, a datastore is a file and format is delimited, and the file pattern includes two files that are file1.csv and file2.csv. And infer schema checkbox is checked. In target, the datastore is the delta table and the auto-create table checkbox is checked and the name of table is demo_schema_derivation.</p></li><li><p>The source data are like this </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file1.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1001,n1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1002,n2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">file2.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id,name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1003,n3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">id_1004,n4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>In the validation and transformation section, we have defined </li></ul><ol><li>A new column <strong>full_name</strong> is doing concatenation of <strong>name</strong> column and &quot;_new&quot; string. Since the full_name column does not exist in the target table, and we have provided data type value in the validation and transformation section so, Guzzle will respect that data type value and take that data type for the defined column. If the user does not provide the value of the data type then Guzzle will take <strong>string</strong> as a data type value.</li><li><strong>name</strong> column but a validate data type checkbox is <strong>unchecked</strong>, and also we haven&#x27;t defined any data type so, Guzzle will not validate this column&#x27;s data and the data type for this column will be <strong>string</strong> as there is no data type defined.</li><li><strong>id</strong> column with data type value integer and validate data type checkbox is checked.</li></ol><a href="https://guzzle.justanalytics.com/img/docs/how-to-guides/ingest_data/schema_derivation_5.png" target="_self" rel="noopener noreferrer"><img width="1000" src="/img/docs/how-to-guides/ingest_data/schema_derivation_5.png"></a><ul><li><p>As shown in the figure, we have defined the data type for <strong>full_name</strong> column varchar(20), for <strong>id</strong> column is integer and for <strong>name</strong> column nothing so, Guzzle will take string data type and, Guzzle will take these columns and data type for the effective schema.</p></li><li><p>While running the ingestion job Guzzle will create the target table using the below query, as the schema derivation strategy is the <strong>Do not inherit schema from source or target</strong>, it will take the help of the validation and transformation section whether to validate or not.</p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE IF NOT EXISTS demo_schema_derivation (`id` integer, `name` string, `full_name` varchar(20));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li><p>And the data that are successfully validated will be stored in the target table and those which are invalid will be stored in the reject table/file.</p></li><li><p>After a successful run of this job target table contains the following data: </p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">demo_schema_derivation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id   | name |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1001 | n1   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1002 | n2   |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 1003 | n3   |</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Here, id column is defined in the validation and transformation section and validate data type checkbox is checked so, Guzzle will validate the data for that column. So, the data with <strong>id=id_1004</strong> is discarded, and this data is stored in the reject section.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ja-guzzle/docs/blob/master/docs/how_to_guides/ingest_data/Derivation Strategy.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/how_to_guides/ingest_data/pre-SQL_and_post-SQL_in_ingestion"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Pre-SQL and Post-SQL for Source and Target in Ingestion</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/how_to_guides/ingest_data/overwrite_and_append_operatoins"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How overwrite and append operation works in Guzzle Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#source" class="table-of-contents__link">Source</a><ul><li><a href="#example" class="table-of-contents__link">Example</a></li></ul></li><li><a href="#inherit-source-data-type-and-do-not-apply-validation" class="table-of-contents__link">Inherit source data type and do not apply validation</a><ul><li><a href="#example-1" class="table-of-contents__link">Example</a></li></ul></li><li><a href="#target" class="table-of-contents__link">Target</a><ul><li><a href="#example-2" class="table-of-contents__link">Example</a></li></ul></li><li><a href="#inherit-target-data-types-and-do-not-apply-validation" class="table-of-contents__link">Inherit target data types and do not apply validation</a><ul><li><a href="#example-3" class="table-of-contents__link">Example</a></li></ul></li><li><a href="#do-not-inherit-schema-from-source-or-target" class="table-of-contents__link">Do not inherit schema from source or target</a><ul><li><a href="#example-4" class="table-of-contents__link">Example</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Just Analytics, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.eb1bd2a6.js"></script>
<script src="/assets/js/main.ed9eb612.js"></script>
</body>
</html>